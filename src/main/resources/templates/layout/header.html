<!-- Header fragment: 상단 네비게이션 -->
<header th:fragment="headerFragment" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary-green fixed-top shadow-sm">
    <div class="container">

      <!-- 로고 -->
      <a class="navbar-brand d-flex align-items-center" th:href="@{/}">
        <img src="/img/calorie_chat_logo.png" alt="CalorieChat" width="36" height="36" class="me-2"/>
        <span class="fw-bold">CalorieChat</span>
      </a>

<!--      &lt;!&ndash; 모바일 토글 &ndash;&gt;-->
<!--      <button class="navbar-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"-->
<!--              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">-->
<!--        <span class="navbar-toggle-icon"></span>-->
<!--      </button>-->

      <!-- 우측 메뉴 -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">

          <!-- 프로필 드롭다운 (로그인한 경우에만) -->
          <li class="nav-item dropdown" sec:authorize="isAuthenticated()">
            <a class="nav-link dropdown-toggle" href="#" id="userMenu" role="button"
               data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle"></i>&nbsp;
              <span th:text="${name ?: '프로필'}">프로필</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
              <li><a class="dropdown-item" th:href="@{/profile}">내 프로필</a></li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <form th:action="@{/api/v1/users/logout}" method="post">
                  <button type="submit" class="dropdown-item">로그아웃</button>
                </form>
              </li>
            </ul>
          </li>

          <!-- 비로그인 상태엔 우측에 아무 메뉴도 표시하지 않음 -->

        </ul>
      </div>
    </div>
  </nav>
</header>